<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
</head>
<body>
<div th:fragment="side" style="height:vh; width:18%;"
     class="bg-danger bg-opacity-25 rounded me-5 text-center">
    <div class="text-start m-2 bg-light rounded p-3">
        <div sec:authorize="isAuthenticated()">
            <img th:src="@{${user.imgUrl}}" alt="프로필 이미지" width="100%"
                 height="150" class="border-bottom mb-1">
            <div class="d-flex align-items-center">
                <p class="fw-bold fs-5 mt-2" style="text-decoration:underline;"
                   th:text="${user.nickname}"></p>
                <span class="ms-1">님</span>
            </div>
            <div style="margin-bottom:-10px" sec:authorize="isAuthenticated()">
                <ol style="font-size:11pt; padding-left:0px;">
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-person-circle me-1" viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                            <path fill-rule="evenodd"
                                  d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                        </svg>
                        <a th:href="@{|/user/info/${user.username}|}">내 정보</a></li>
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-pen me-1" viewBox="0 0 16 16">
                            <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"/>
                        </svg>
                        <a th:href="@{|/user/modify/${user.username}|}">정보수정</a></li>
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-key me-1" viewBox="0 0 16 16">
                            <path d="M0 8a4 4 0 0 1 7.465-2H14a.5.5 0 0 1 .354.146l1.5 1.5a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0L13 9.207l-.646.647a.5.5 0 0 1-.708 0L11 9.207l-.646.647a.5.5 0 0 1-.708 0L9 9.207l-.646.647A.5.5 0 0 1 8 10h-.535A4 4 0 0 1 0 8zm4-3a3 3 0 1 0 2.712 4.285A.5.5 0 0 1 7.163 9h.63l.853-.854a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.793-.793-1-1h-6.63a.5.5 0 0 1-.451-.285A3 3 0 0 0 4 5z"/>
                            <path d="M4 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                        </svg>
                        <a th:href="@{|/user/update/${user.username}|}">비밀번호 변경</a></li>
                </ol>
            </div>
        </div>
        <div sec:authorize="isAnonymous()">
            <img src="https://thumb.ac-illust.com/ad/added14396179429fc29841a20108f39_t.jpeg" alt="" width="100%"
                 height="150" class="border-bottom mb-1 ">
            <p class="fw-bold mt-2" sec:authorize="isAnonymous()"><span style="text-decoration:underline;">guest</span>님
                환영합니다!</p>
        </div>
    </div>
    <div class="d-flex justify-content-center">
        <div class="my-2">
            <button class="btn btn-outline-light" style="background:lightcoral" type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseQuote" aria-expanded="false"
                    aria-controls="collapseQuote">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                     class="bi bi-caret-down-fill" viewBox="0 0 16 16">
                    <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                </svg>
                오늘의 명언
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                     class="bi bi-caret-down-fill" viewBox="0 0 16 16">
                    <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                </svg>
            </button>
            <div>
                <div class="collapse collapse-horizontal my-2" id="collapseQuote">
                    <div class="card card-body" style="width:200px; font-size:11pt;">
                        <div class="card-text">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-chat-quote" viewBox="0 0 16 16">
                                <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                                <path d="M7.066 6.76A1.665 1.665 0 0 0 4 7.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 0 0 .6.58c1.486-1.54 1.293-3.214.682-4.112zm4 0A1.665 1.665 0 0 0 8 7.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 0 0 .6.58c1.486-1.54 1.293-3.214.682-4.112z"/>
                            </svg>
                            <p class="mt-1" id="quote-container"></p>
                        </div>
                        <script src="/quote.js"></script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="badge bg-danger bg-opacity-25 text-light p-2 mb-2"
         style="background:mistyrose; border:1px solid white; border-radius:20px; width:90%; font-family: 'Gugi', sans-serif;">
        <div>
            <div class="d-flex align-items-center justify-content-around">
                <div id="weather-icon"></div>
                <div class="text-start">
                    <p id="temperature" class="fs-2 fw-bolder" style="margin-top:5px;"></p>
                    <div class="d-flex fw-light" style="margin-top:-10px; margin-bottom:-10px; font-size:13px;">
                        <p class="me-2">대전,</p>
                        <p id="weather-description"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="badge text-dark p-2 mb-2"
         style="background:mistyrose; border:1px solid pink; border-radius:20px; width:90%; font-family: 'Gugi', sans-serif;">
        <p id="current-time" class="fs-2 fw-bolder" style="margin-bottom:10px; margin-top:5px;"></p>
        <p id="current-date" class="fs-6 fw-light" style="margin-bottom:5px;"></p>
    </div>
    <form class="input-group mb-2" style="width:90%; margin:0 auto;" method="get">
        <input type="text" name="nickname" class="form-control" placeholder="사용자 검색" id="userName">
        <input class="btn btn-outline-light" style="background:lightcoral; border:lightcoral" type="submit" value="검색">
    </form>
    <div style="background:white; border-radius:20px; width:90%; margin:0 auto; margin-bottom:15px; padding:10px;">
        <div class="scrollable-container">
            <div class="border-bottom mb-1 fw-bold fs-5" th:if="${searchKw == ''}">전체 사용자</div>
            <div class="border-bottom mb-1 fw-bold" th:if="${searchKw != ''}" th:text="|'${searchKw}'로 검색된 사용자|"></div>
            <div th:if="${#lists.size(authorList) == 0}" style="color:gray;">검색 결과 없음</div>
            <div class="d-flex flex-wrap justify-content-start" style="justify-content: space-between;">
                <div th:each="author : ${authorList}" style="width:30%; display:block; margin: 5px 0;">
                    <div style="width:100%; text-align:center;">
                        <img th:src="@{${author.imgUrl}}" alt="" style="height:50px; width:50px; border-radius:15px;">
                        <a th:href="@{|/user/page/${author.username}|}">
                            <div th:text="${author.nickname}"></div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="/weather.js"></script>
</div>
</body>
</html>